<?xml version="1.0" encoding="UTF-8"?>
<project name="gen-config" default="gen-config">

	<!-- The local.properties file is created and updated by the 'android' tool.
		 It contains the path to the SDK. It should *NOT* be checked into
		 Version Control Systems. -->
	<loadproperties srcFile="local.properties" />

	<property file="ant.properties" />

	<!-- Copy Config.java to our source tree, replacing custom tokens with values in build.properties. -->
	<target name="gen-config">

		<delete file="${out.classes.absolute.dir}/org/ohmage"/>

		<!-- Copy the configuration file, replacing tokens in the file. -->
		<copy file="config/Config.java" todir="${gen.absolute.dir}/org/ohmage" overwrite="true" encoding="utf-8">
			<filterset>

				<filter token="CONFIG.SERVER_URL" value='"${config.server.url}"'/>
				<filter token="CONFIG.SINGLE_CAMPAIGN" value="${config.single_campaign}"/>
				<filter token="CONFIG.ALLOWS_FEEDBACK" value="${config.allows_feedback}"/>
				<filter token="CONFIG.ADMIN_MODE" value="${config.admin_mode}"/>

			</filterset>
		</copy>
	</target>

	<!-- version-tag: custom -->
	<import file="${sdk.dir}/tools/ant/build.xml" />
</project>
